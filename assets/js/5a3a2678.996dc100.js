"use strict";(self.webpackChunkcli_for_microsoft_365_docs=self.webpackChunkcli_for_microsoft_365_docs||[]).push([[61662],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=i,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(f,r(r({ref:t},c),{},{components:n})):a.createElement(f,r({ref:t},c))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},65946:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const o={},r="purview auditlog list",l={unversionedId:"cmd/purview/auditlog/auditlog-list",id:"cmd/purview/auditlog/auditlog-list",title:"purview auditlog list",description:"List audit logs within your tenant",source:"@site/docs/cmd/purview/auditlog/auditlog-list.md",sourceDirName:"cmd/purview/auditlog",slug:"/cmd/purview/auditlog/auditlog-list",permalink:"/cli-microsoft365-docusaurus/cmd/purview/auditlog/auditlog-list",draft:!1,editUrl:"https://github.com/pnp/cli-microsoft365/blob/main/docs/docs/cmd/purview/auditlog/auditlog-list.md",tags:[],version:"current",lastUpdatedAt:1675488507,formattedLastUpdatedAt:"Feb 4, 2023",frontMatter:{},sidebar:"commands",previous:{title:"pp tenant settings set",permalink:"/cli-microsoft365-docusaurus/cmd/pp/tenant/tenant-settings-set"},next:{title:"purview retentionevent add",permalink:"/cli-microsoft365-docusaurus/cmd/purview/retentionevent/retentionevent-add"}},s={},p=[{value:"Usage",id:"usage",level:2},{value:"Options",id:"options",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Examples",id:"examples",level:2},{value:"Response",id:"response",level:2}],c={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"purview-auditlog-list"},"purview auditlog list"),(0,i.kt)("p",null,"List audit logs within your tenant"),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"m365 purview auditlog list [options]\n")),(0,i.kt)("h2",{id:"options"},"Options"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"--contentType <contentType>"),"\n: Content type of logs to retrieve. Possible values: ",(0,i.kt)("inlineCode",{parentName:"p"},"AzureActiveDirectory"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Exchange"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"SharePoint"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"General"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"DLP"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"--startTime [startTime]"),"\n: Time indicating the ",(0,i.kt)("strong",{parentName:"p"},"inclusive")," start of a time range of content to return. This should be defined as a valid ISO 8601 string (2021-12-16T18:28:48.6964197Z). Start time cannot be more than 7 days in the past. Default value is 24h ago."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"--endTime [endTime]"),"\n: Time indicating the ",(0,i.kt)("strong",{parentName:"p"},"exclusive")," end of a time range of content to return. This should be defined as a valid ISO 8601 string (2021-12-16T18:28:48.6964197Z). Default value is now."),(0,i.kt)("p",null,'--8<-- "docs/cmd/_global.md"'),(0,i.kt)("h2",{id:"remarks"},"Remarks"),(0,i.kt)("p",null,"!!! important\nBefore you can access audit log data, you must enable unified audit logging for your Microsoft 365 tenant. For instructions, check out the page ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/microsoft-365/compliance/audit-log-enable-disable"},"Turn auditing on or off"),"."),(0,i.kt)("p",null,"!!! important\nWhen running this command for the first time for a certain content type, a subscription for this content type is created. It can take up to 12 hours for the first content blobs to become available for that subscription."),(0,i.kt)("p",null,"!!! tip\nRetrieving audit logs is an intensive process, especially for large or active tenants. In this case it may take some time to retrieve all audit logs. It can be useful to add the ",(0,i.kt)("inlineCode",{parentName:"p"},"--verbose")," option to your command to view the command progress."),(0,i.kt)("p",null,"When you specify a value for ",(0,i.kt)("inlineCode",{parentName:"p"},"contentType"),", consider the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AzureActiveDirectory")," includes all Azure AD audit logs."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Exchange")," includes all Exchange audit logs."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"SharePoint")," includes all SharePoint audit logs."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"General")," includes all other workloads not included in the previous content types."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"DLP")," DLP events only for all workloads.")),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("p",null,"List all SharePoint audit logs for the past 24 hours"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"m365 purview auditlog list --contentType SharePoint\n")),(0,i.kt)("p",null,"List all SharePoint audit logs within a specific time frame"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'m365 purview auditlog list --contentType SharePoint --startTime "2023-01-01T00:00:00Z" --endTime "2023-01-03T09:00:00Z"\n')),(0,i.kt)("p",null,"Get all SharePoint audit logs within a specific time frame and save the logs to a file"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'m365 purview auditlog list --contentType SharePoint --startTime "2023-01-01T00:00:00Z" --endTime "2023-01-01T12:00:00Z" > auditLogs.json\n')),(0,i.kt)("h2",{id:"response"},"Response"),(0,i.kt)("p",null,'=== "JSON"'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'```json\n[\n  {\n    "AppAccessContext": {\n        "ClientAppId": "94bfad6e-a0b3-4eb9-8e2b-83eeb335de28",\n        "CorrelationId": "040d86a0-f096-5000-d4b4-baac627b75f3",\n        "UniqueTokenId": "5CVDGmrynkGYBkY-MPynAA"\n    },\n    "CreationTime": "2023-01-10T00:00:00",\n    "Id": "4d671836-c772-4169-55f9-08dae745c839",\n    "Operation": "ListItemViewed",\n    "OrganizationId": "6e40c2aa-0565-4013-b38c-d5e6f0c42993",\n    "RecordType": 36,\n    "UserKey": "i:0i.t|00000003-0000-0ff1-ce00-000000000000|app@sharepoint",\n    "UserType": 0,\n    "Version": 1,\n    "Workload": "SharePoint",\n    "ClientIP": "168.63.104.32",\n    "ObjectId": "https://contoso.sharepoint.com/sites/Project-x/Lists/cae414a1-ac65-4a90-844e-651d7a1e463d/305_.000",\n    "UserId": "john.doe@contoso.com",\n    "ApplicationId": "94bfad6e-a0b3-4eb9-8e2b-83eeb335de28",\n    "CorrelationId": "040d86a0-f096-5000-d4b4-baac627b75f3",\n    "EventSource": "SharePoint",\n    "ItemType": "ListItem",\n    "ListId": "cae414a1-ac65-4a90-844e-651d7a1e463d",\n    "ListItemUniqueId": "2d364471-4d27-4186-b139-072c8225ee4a",\n    "Site": "51f5a236-b2e5-4a6d-a81d-13d188610155",\n    "UserAgent": "NONISV|Contoso|ContosoApp/1.0",\n    "WebId": "38ab94aa-a904-4c2b-8467-4be0e457f97b",\n    "CustomizedDoclib": false,\n    "FromApp": false,\n    "ItemCount": 192,\n    "ListBaseTemplateType": "100",\n    "ListBaseType": "GenericList",\n    "ListColor": "",\n    "ListIcon": "",\n    "Source": "Unknown",\n    "TemplateTypeId": "",\n    "ListTitle": "cae414a1-ac65-4a90-844e-651d7a1e463d"\n  }\n]\n```\n')),(0,i.kt)("p",null,'=== "Text"'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"```txt\nCreationTime         UserId                Operation       ObjectId                                                                                          \n-------------------  --------------------  --------------  --------------------------------------------------------------------------------------------------\n2023-01-10T00:00:00  john.doe@contoso.com  ListItemViewed  https://contoso.sharepoint.com/sites/Project-x/Lists/cae414a1-ac65-4a90-844e-651d7a1e463d/305_.000\n```\n")),(0,i.kt)("p",null,'=== "CSV"'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"```csv\nCreationTime,UserId,Operation,ObjectId\n2023-01-10T00:00:00,john.doe@contoso.com,ListItemViewed,https://contoso.sharepoint.com/sites/Project-x/Lists/cae414a1-ac65-4a90-844e-651d7a1e463d/305_.000\n```\n")))}u.isMDXComponent=!0}}]);