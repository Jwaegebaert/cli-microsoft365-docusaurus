"use strict";(self.webpackChunkcli_for_microsoft_365_docs=self.webpackChunkcli_for_microsoft_365_docs||[]).push([[90033],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>f});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},p=Object.keys(e);for(r=0;r<p.length;r++)t=p[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(r=0;r<p.length;r++)t=p[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=r.createContext({}),l=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},c=function(e){var n=l(e.components);return r.createElement(i.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,p=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(t),m=o,f=u["".concat(i,".").concat(m)]||u[m]||d[m]||p;return t?r.createElement(f,a(a({ref:n},c),{},{components:t})):r.createElement(f,a({ref:n},c))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var p=t.length,a=new Array(p);a[0]=m;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s[u]="string"==typeof e?e:o,a[1]=s;for(var l=2;l<p;l++)a[l]=t[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},39939:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>d,frontMatter:()=>p,metadata:()=>s,toc:()=>l});var r=t(87462),o=(t(67294),t(3905));const p={},a="spfx project externalize",s={unversionedId:"cmd/spfx/project/project-externalize",id:"cmd/spfx/project/project-externalize",title:"spfx project externalize",description:"Externalizes SharePoint Framework project dependencies",source:"@site/docs/cmd/spfx/project/project-externalize.md",sourceDirName:"cmd/spfx/project",slug:"/cmd/spfx/project/project-externalize",permalink:"/cli-microsoft365-docusaurus/cmd/spfx/project/project-externalize",draft:!1,editUrl:"https://github.com/pnp/cli-microsoft365/blob/main/docs/docs/cmd/spfx/project/project-externalize.md",tags:[],version:"current",lastUpdatedAt:1668980733,formattedLastUpdatedAt:"Nov 20, 2022",frontMatter:{},sidebar:"commands",previous:{title:"spfx project doctor",permalink:"/cli-microsoft365-docusaurus/cmd/spfx/project/project-doctor"},next:{title:"spfx project permissions grant",permalink:"/cli-microsoft365-docusaurus/cmd/spfx/project/project-permissions-grant"}},i={},l=[{value:"Usage",id:"usage",level:2},{value:"Options",id:"options",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Examples",id:"examples",level:2},{value:"Response",id:"response",level:2}],c={toc:l},u="wrapper";function d(e){let{components:n,...t}=e;return(0,o.kt)(u,(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"spfx-project-externalize"},"spfx project externalize"),(0,o.kt)("p",null,"Externalizes SharePoint Framework project dependencies"),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"m365 spfx project externalize [options]\n")),(0,o.kt)("h2",{id:"options"},"Options"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"-f, --outputFile [outputFile]"),"\n: Path to the file where the report should be stored in"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"-h, --help"),"\n: output usage information"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--query [query]"),"\n: JMESPath query string. See ",(0,o.kt)("a",{parentName:"p",href:"http://jmespath.org/"},"http://jmespath.org/")," for more information and examples"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"-o, --output [output]"),"\n: Output type. ",(0,o.kt)("inlineCode",{parentName:"p"},"json,text,csv,md"),". Default ",(0,o.kt)("inlineCode",{parentName:"p"},"json")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--verbose"),"\n: Runs command with verbose logging"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--debug"),"\n: Runs command with debug logging"),(0,o.kt)("p",null,"!!! important\nRun this command in the folder where the project for which you want to externalize dependencies is located. This command doesn't change your project files."),(0,o.kt)("h2",{id:"remarks"},"Remarks"),(0,o.kt)("p",null,"!!! attention\nThis command is in preview and could change once it's officially released. If you see any room for improvement, we'd love to hear from you at ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/pnp/cli-microsoft365/issues"},"https://github.com/pnp/cli-microsoft365/issues"),"."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"spfx project externalize")," command helps you externalize your SharePoint Framework project dependencies using the ",(0,o.kt)("a",{parentName:"p",href:"https://unpkg.com/"},"unpkg CDN"),"."),(0,o.kt)("p",null,"This command doesn't change your project files. Instead, it gives you a report with all steps necessary to externalize your project dependencies. Externalizing project dependencies is error-prone, especially when it comes to updating your solution's code. This is why at this moment, this command produces a report that you can use yourself to perform the necessary changes and verify that everything is working as expected."),(0,o.kt)("p",null,"Supported SharePoint Framework versions are 1.0.0, 1.0.1, 1.0.2, 1.1.0, 1.1.1, 1.1.3, 1.2.0, 1.3.0, 1.3.1, 1.3.2, 1.3.4, 1.4.0, 1.4.1, 1.5.0, 1.5.1, 1.6.0, 1.7.0, 1.7.1, 1.8.0, 1.8.1, 1.8.2, 1.9.1."),(0,o.kt)("h2",{id:"examples"},"Examples"),(0,o.kt)("p",null,"Get instructions to externalize the current SharePoint Framework project dependencies and save the findings in a Markdown file"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'m365 spfx project externalize --output md > "deps-report.md"\n')),(0,o.kt)("p",null,"Get instructions to externalize the current SharePoint Framework project dependencies and show the summary of the findings in the terminal"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"m365 spfx project externalize\n")),(0,o.kt)("h2",{id:"response"},"Response"),(0,o.kt)("p",null,"Below output will be produced to externalize the SharePoint Framework project dependencies."),(0,o.kt)("p",null,'=== "JSON"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'```json\n{\n  "externalConfiguration": {\n    "externals": {\n      "@pnp/sp": {\n        "path": "https://unpkg.com/@pnp/sp@^1.3.11/dist/sp.es5.umd.min.js",\n        "globalName": "pnp.sp",\n        "globalDependencies": [\n          "@pnp/logging",\n          "@pnp/common",\n          "@pnp/odata",\n          "tslib"\n        ]\n      },\n      "tslib": {\n        "path": "https://unpkg.com/tslib@^1.10.0/tslib.js",\n        "globalName": "tslib"\n      }\n    }\n  },\n  "edits": [\n    {\n      "action": "add",\n      "path": "C:\\\\react-global-news-sp2019\\\\src\\\\webparts\\\\news\\\\NewsWebPart.ts",\n      "targetValue": "require(\\"tslib\\");"\n    }\n  ]\n}\n```\n')),(0,o.kt)("p",null,'=== "Text"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'```text\nIn the config/config.json file update the externals property to:\n\n{\n  "externalConfiguration": {\n    "externals": {\n      "@pnp/sp": {\n        "path": "https://unpkg.com/@pnp/sp@^1.3.11/dist/sp.es5.umd.min.js",\n        "globalName": "pnp.sp",\n        "globalDependencies": [\n          "@pnp/logging",\n          "@pnp/common",\n          "@pnp/odata",\n          "tslib"\n        ]\n      },\n      "tslib": {\n        "path": "https://unpkg.com/tslib@^1.10.0/tslib.js",\n        "globalName": "tslib"\n      }\n    }\n  },\n  "edits": [\n    {\n      "action": "add",\n      "path": "C:\\\\react-global-news-sp2019\\\\src\\\\webparts\\\\news\\\\NewsWebPart.ts",\n      "targetValue": "require(\\"tslib\\");"\n    }\n  ]\n}\n```\n')),(0,o.kt)("p",null,'=== "Markdown"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'````md\n# Externalizing dependencies of project react-global-news-sp2019\n\nDate: 11/7/2022\n\n## Findings\n\n### Modify files\n\n#### [config.json](config/config.json)\n\nReplace the externals property (or add if not defined) with\n\n```json\n{\n  "externals": {\n    "@pnp/sp": {\n      "path": "https://unpkg.com/@pnp/sp@^1.3.11/dist/sp.es5.umd.min.js",\n      "globalName": "pnp.sp",\n      "globalDependencies": [\n        "@pnp/logging",\n        "@pnp/common",\n        "@pnp/odata",\n        "tslib"\n      ]\n    },\n    "tslib": {\n      "path": "https://unpkg.com/tslib@^1.10.0/tslib.js",\n      "globalName": "tslib"\n    }\n  }\n}\n```\n\n#### [C:\\react-global-news-sp2019\\src\\webparts\\news\\NewsWebPart.ts](C:\\react-global-news-sp2019\\src\\webparts\\news\\NewsWebPart.ts)\nadd\n```JavaScript\nrequire("tslib");\n```\n````\n')))}d.isMDXComponent=!0}}]);