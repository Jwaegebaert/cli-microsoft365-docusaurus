"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[28653],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),d=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},l="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),l=d(a),m=n,h=l["".concat(s,".").concat(m)]||l[m]||u[m]||o;return a?r.createElement(h,i(i({ref:t},c),{},{components:a})):r.createElement(h,i({ref:t},c))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=m;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p[l]="string"==typeof e?e:n,i[1]=p;for(var d=2;d<o;d++)i[d]=a[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},72095:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>l,frontMatter:()=>o,metadata:()=>p,toc:()=>d});var r=a(87462),n=(a(67294),a(3905));const o={},i="aad oauth2grant add",p={unversionedId:"cmd/aad/oauth2grant/oauth2grant-add",id:"cmd/aad/oauth2grant/oauth2grant-add",title:"aad oauth2grant add",description:"Grant the specified service principal OAuth2 permissions to the specified resource",source:"@site/docs/cmd/aad/oauth2grant/oauth2grant-add.md",sourceDirName:"cmd/aad/oauth2grant",slug:"/cmd/aad/oauth2grant/oauth2grant-add",permalink:"/cmd/aad/oauth2grant/oauth2grant-add",draft:!1,editUrl:"https://github.com/pnp/cli-microsoft365/blob/main/docs/docs/cmd/aad/oauth2grant/oauth2grant-add.md",tags:[],version:"current",lastUpdatedBy:"Jwaegebaert",lastUpdatedAt:1672930100,formattedLastUpdatedAt:"Jan 5, 2023",frontMatter:{},sidebar:"commands",previous:{title:"aad o365group user set",permalink:"/cmd/aad/o365group/o365group-user-set"},next:{title:"aad oauth2grant list",permalink:"/cmd/aad/oauth2grant/oauth2grant-list"}},s={},d=[{value:"Usage",id:"usage",level:2},{value:"Options",id:"options",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Examples",id:"examples",level:2},{value:"More information",id:"more-information",level:2}],c={toc:d};function l(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"aad-oauth2grant-add"},"aad oauth2grant add"),(0,n.kt)("p",null,"Grant the specified service principal OAuth2 permissions to the specified resource"),(0,n.kt)("h2",{id:"usage"},"Usage"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"m365 aad oauth2grant add [options]\n")),(0,n.kt)("h2",{id:"options"},"Options"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"-i, --clientId <clientId>"),"\n: ",(0,n.kt)("inlineCode",{parentName:"p"},"objectId")," of the service principal for which permissions should be granted"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"-r, --resourceId <resourceId>"),"\n: ",(0,n.kt)("inlineCode",{parentName:"p"},"objectId")," of the AAD application to which permissions should be granted"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"-s, --scope <scope>"),"\n: Permissions to grant"),(0,n.kt)("p",null,'--8<-- "docs/cmd/_global.md"'),(0,n.kt)("h2",{id:"remarks"},"Remarks"),(0,n.kt)("p",null,"Before you can grant service principal OAuth2 permissions, you need its ",(0,n.kt)("inlineCode",{parentName:"p"},"objectId"),". You can retrieve it using the ",(0,n.kt)("a",{parentName:"p",href:"/cmd/aad/sp/sp-get"},"aad sp get")," command."),(0,n.kt)("p",null,"The resource for which you want to grant permissions is designated using its ",(0,n.kt)("inlineCode",{parentName:"p"},"objectId"),". You can retrieve it using the ",(0,n.kt)("a",{parentName:"p",href:"/cmd/aad/sp/sp-get"},"aad sp get")," command, the same way you would retrieve the ",(0,n.kt)("inlineCode",{parentName:"p"},"objectId")," of the service principal."),(0,n.kt)("p",null,"When granting OAuth2 permissions, you have to specify which permission scopes you want to grant the service principal. You can get the list of available permission scopes either from the resource documentation or from the ",(0,n.kt)("inlineCode",{parentName:"p"},"appRoles")," property when retrieving information about the service principal using the ",(0,n.kt)("a",{parentName:"p",href:"/cmd/aad/sp/sp-get"},"aad sp get")," command. Multiple permission scopes can be specified separated by a space."),(0,n.kt)("p",null,"When granting OAuth2 permissions, the values of the ",(0,n.kt)("inlineCode",{parentName:"p"},"clientId")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"resourceId")," properties form a unique key. If a grant for the same ",(0,n.kt)("inlineCode",{parentName:"p"},"clientId"),"-",(0,n.kt)("inlineCode",{parentName:"p"},"resourceId")," pair already exists, running the ",(0,n.kt)("inlineCode",{parentName:"p"},"aad oauth2grant add")," command will fail with an error. If you want to change permissions on an existing OAuth2 grant use the ",(0,n.kt)("a",{parentName:"p",href:"/cmd/aad/oauth2grant/oauth2grant-set"},"aad oauth2grant set")," command instead."),(0,n.kt)("h2",{id:"examples"},"Examples"),(0,n.kt)("p",null,"Grant the service principal ",(0,n.kt)("em",{parentName:"p"},"d03a0062-1aa6-43e1-8f49-d73e969c5812")," the ",(0,n.kt)("em",{parentName:"p"},"Calendars.Read")," OAuth2 permissions to the ",(0,n.kt)("em",{parentName:"p"},"c2af2474-2c95-423a-b0e5-e4895f22f9e9")," resource."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"m365 aad oauth2grant add --clientId d03a0062-1aa6-43e1-8f49-d73e969c5812 --resourceId c2af2474-2c95-423a-b0e5-e4895f22f9e9 --scope Calendars.Read\n")),(0,n.kt)("p",null,"Grant the service principal ",(0,n.kt)("em",{parentName:"p"},"d03a0062-1aa6-43e1-8f49-d73e969c5812")," the ",(0,n.kt)("em",{parentName:"p"},"Calendars.Read")," and ",(0,n.kt)("em",{parentName:"p"},"Mail.Read")," OAuth2 permissions to the ",(0,n.kt)("em",{parentName:"p"},"c2af2474-2c95-423a-b0e5-e4895f22f9e9")," resource."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},'m365 aad oauth2grant add --clientId d03a0062-1aa6-43e1-8f49-d73e969c5812 --resourceId c2af2474-2c95-423a-b0e5-e4895f22f9e9 --scope "Calendars.Read Mail.Read"\n')),(0,n.kt)("h2",{id:"more-information"},"More information"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Application and service principal objects in Azure Active Directory (Azure AD): ",(0,n.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-application-objects"},"https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-application-objects"))))}l.isMDXComponent=!0}}]);